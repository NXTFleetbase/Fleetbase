{"version":3,"file":"raf-pool.umd.js","sources":["../src/index.ts"],"sourcesContent":["interface IPoolItem {\n  [key: string]: Function;\n}\n\nlet requestId: number;\n\n/**\n * ensure use on requestAnimationFrame, no matter how many components\n * on the page are using this mixin\n *\n * @class RAFAdmin\n * @public\n */\nexport default class RAFAdmin {\n  private pool: Array<IPoolItem>;\n\n  constructor() {\n    this.pool = [];\n    this.flush();\n  }\n\n  /**\n   * @method flush\n   * @public\n   */\n  public flush(): void {\n    requestId = window.requestAnimationFrame(() => {\n      // assign to a variable to avoid ensure no race conditions happen\n      // b/w flushing the pool and interating through the pool\n      const { pool } = this;\n      this.reset();\n      pool.forEach((item: IPoolItem) => {\n        item[Object.keys(item)[0]]();\n      });\n\n      this.flush();\n    });\n  }\n\n  /**\n   * @method add\n   * @public\n   */\n  public add(elementId: string | number | symbol, fn: Function): Function {\n    this.pool.push({ [elementId]: fn });\n    return fn;\n  }\n\n  /**\n   * @method remove\n   * @public\n   */\n  public remove(elementId: string): void {\n    this.pool = this.pool.filter((obj: IPoolItem) => {\n      return !obj[elementId];\n    });\n  }\n\n  /**\n   * @method reset\n   * @public\n   */\n  public reset(): void {\n    this.pool = [];\n  }\n\n  public stop(): void {\n    window.cancelAnimationFrame(requestId);\n  }\n}\n"],"names":[],"mappings":";;;;;;IAIA,IAAI,SAAiB,CAAC;IAEtB;;;;;;;IAOA;QAGE;YACE,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;YACf,IAAI,CAAC,KAAK,EAAE,CAAC;SACd;;;;;QAMM,wBAAK,GAAZ;YAAA,iBAYC;YAXC,SAAS,GAAG,MAAM,CAAC,qBAAqB,CAAC;;;gBAG/B,IAAA,iBAAI,CAAU;gBACtB,KAAI,CAAC,KAAK,EAAE,CAAC;gBACb,IAAI,CAAC,OAAO,CAAC,UAAC,IAAe;oBAC3B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;iBAC9B,CAAC,CAAC;gBAEH,KAAI,CAAC,KAAK,EAAE,CAAC;aACd,CAAC,CAAC;SACJ;;;;;QAMM,sBAAG,GAAV,UAAW,SAAmC,EAAE,EAAY;;YAC1D,IAAI,CAAC,IAAI,CAAC,IAAI,WAAG,GAAC,SAAS,IAAG,EAAE,MAAG,CAAC;YACpC,OAAO,EAAE,CAAC;SACX;;;;;QAMM,yBAAM,GAAb,UAAc,SAAiB;YAC7B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAC,GAAc;gBAC1C,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;aACxB,CAAC,CAAC;SACJ;;;;;QAMM,wBAAK,GAAZ;YACE,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;SAChB;QAEM,uBAAI,GAAX;YACE,MAAM,CAAC,oBAAoB,CAAC,SAAS,CAAC,CAAC;SACxC;QACH,eAAC;IAAD,CAAC,IAAA;;;;;;;;"}