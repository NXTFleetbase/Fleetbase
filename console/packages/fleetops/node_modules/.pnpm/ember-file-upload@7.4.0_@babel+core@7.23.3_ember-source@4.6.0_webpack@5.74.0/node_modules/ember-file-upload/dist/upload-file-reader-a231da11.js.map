{"version":3,"file":"upload-file-reader-a231da11.js","sources":["../../node_modules/.pnpm/@babel+runtime@7.21.0/node_modules/@babel/runtime/helpers/esm/typeof.js","../../node_modules/.pnpm/@babel+runtime@7.21.0/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../../node_modules/.pnpm/@babel+runtime@7.21.0/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../../node_modules/.pnpm/@babel+runtime@7.21.0/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../src/system/http-request.ts","../src/system/upload-file-reader.ts"],"sourcesContent":["export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import { bind } from '@ember/runloop';\nimport RSVP from 'rsvp';\nimport { HTTPRequestOptions } from '../interfaces';\n\nfunction parseHeaders(headerString: string) {\n  return headerString\n    .split(/\\n|\\r/)\n    .filter((str) => str !== '')\n    .reduce((headers: Headers, headerString: string) => {\n      const parts = headerString.split(/^([0-9A-Za-z_-]*:)/);\n      if (parts.length > 0 && parts[1] && parts[2]) {\n        headers.append(parts[1].slice(0, -1), parts[2].trim());\n      }\n      return headers;\n    }, new Headers());\n}\n\nfunction parseResponse(request: XMLHttpRequest): Response {\n  const body = request.response === '' ? null : request.response;\n  if (request.status >= 200 && request.status < 600) {\n    return new Response(body, {\n      status: request.status,\n      statusText: request.statusText,\n      headers: parseHeaders(request.getAllResponseHeaders()),\n    });\n  } else {\n    return Response.error();\n  }\n}\n\nexport default class HTTPRequest {\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  onprogress: (event?: ProgressEvent<EventTarget>) => void | undefined;\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  ontimeout: (event?: ProgressEvent<EventTarget>) => void | undefined;\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  onabort: (event?: ProgressEvent<EventTarget>) => void | undefined;\n\n  request;\n  resolve;\n  reject;\n  promise: RSVP.Promise<Response>;\n\n  constructor(options: HTTPRequestOptions = {}) {\n    const { resolve, reject, promise } = RSVP.defer(\n      `ember-file-upload: ${options.label}`\n    );\n    this.resolve = resolve;\n    this.reject = reject;\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    this.promise = promise;\n    this.request = new XMLHttpRequest();\n\n    this.request.withCredentials = options.withCredentials ?? false;\n\n    let aborted: RSVP.Deferred<string>;\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    promise.cancel = () => {\n      if (aborted == null) {\n        aborted = RSVP.defer(`ember-file-upload: Abort ${options.label}`);\n        this.request.abort();\n      }\n      return aborted.promise;\n    };\n    promise.then = function (...args) {\n      const newPromise = RSVP.Promise.prototype.then.apply(this, args);\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      newPromise.cancel = promise.cancel;\n      newPromise.then = promise.then;\n      return newPromise;\n    };\n    this.request.onabort = bind(this, function () {\n      this.onabort?.();\n      aborted.resolve();\n    });\n\n    this.request.onloadstart =\n      this.request.onprogress =\n      this.request.onloadend =\n        bind(this, function (evt) {\n          this.onprogress?.(evt);\n        });\n\n    if (this.request.upload) {\n      this.request.upload.onprogress = this.request.onprogress;\n    }\n\n    this.request.onload = bind(this, function () {\n      const response = parseResponse(this.request);\n      if (Math.floor(response.status / 200) === 1) {\n        resolve(response);\n      } else {\n        reject(response);\n      }\n    });\n\n    this.request.onerror = bind(this, function () {\n      reject(parseResponse(this.request));\n    });\n\n    Object.defineProperty(this, 'timeout', {\n      get() {\n        return this.request.timeout;\n      },\n      set(timeout) {\n        this.request.timeout = timeout;\n      },\n      enumerable: true,\n      configurable: false,\n    });\n\n    this.request.ontimeout = bind(this, function () {\n      this.ontimeout?.();\n      reject(parseResponse(this.request));\n    });\n  }\n\n  send(body: Parameters<XMLHttpRequest['send']>[0]) {\n    this.request.send(body);\n    return this.promise;\n  }\n\n  open(\n    method: string,\n    url: string | URL,\n    _async: boolean,\n    usename?: string,\n    password?: string\n  ) {\n    this.request.open(method, url, true, usename, password);\n  }\n\n  setRequestHeader(name: string, value: string) {\n    this.request.setRequestHeader(name, value);\n  }\n}\n","import RSVP from 'rsvp';\n\n/**\n  Provides a promise-aware interface for reading files.\n\n  ```js\n  import { UploadFile, UploadFileReader } from 'ember-file-upload';\n\n  let reader = new UploadFileReader();\n  let file = File.fromDataURL('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAAXNSR0IArs4c6QAAACNJREFUCB1jYICC6dOn/4exwTRMAEYzwBnoOmASMBpuDLIAAIVVFiE0cg0oAAAAAElFTkSuQmCC');\n\n  reader.readAsDataURL(file.blob).then((url) => {\n    return url;\n  }, function (err) {\n    console.error(err);\n  });\n  ```\n\n  Promises can be aborted, which will cancel the file upload:\n\n  ```js\n  let promise = reader.readAsDataURL(file.blob);\n  promise.then((url) => {\n    return url;\n  }, (err) => {\n    console.error(err);\n  });\n\n  promise.abort().then(() => {\n    console.error('cancelled reading file');\n  });\n  ```\n\n  @class UploadFileReader\n  @constructor\n  @param [options] An object with a label to use to mark the promise.\n */\nexport default class UploadFileReader {\n  label;\n  reader;\n\n  constructor(options: { label: string } = { label: '' }) {\n    this.label = options.label;\n    this.reader = new FileReader();\n  }\n\n  /**\n    Reads the file and returns a promise that will\n    return the blob as ArrayBuffer.\n\n    @method readAsArrayBuffer\n    @return {Promise} A promise that will return the file as an ArrayBuffer\n   */\n  readAsArrayBuffer(blob: Blob) {\n    this.reader.readAsArrayBuffer(blob);\n    return this.cancellablePromise;\n  }\n\n  /**\n    Reads the file and returns a promise that will\n    return the blob as data URL.\n\n    This is useful for reading images to display\n    as a preview in the browser.\n\n    @method readAsDataURL\n    @return {Promise} A promise that will return the file as a data URL\n   */\n  readAsDataURL(blob: Blob) {\n    this.reader.readAsDataURL(blob);\n    return this.cancellablePromise;\n  }\n\n  /**\n    Reads the file and returns a promise that will\n    return the blob as binary string.\n\n    This is useful for reading images or files that\n    are not plain text.\n\n    @method readAsBinaryString\n    @return {Promise} A promise that will return the file as a binary string\n   */\n  readAsBinaryString(blob: Blob) {\n    this.reader.readAsBinaryString(blob);\n    return this.cancellablePromise;\n  }\n\n  /**\n    Reads the file and returns a promise that will\n    return the blob as text.\n\n    This is useful for reading plain text files.\n\n    @method readAsText\n    @return {Promise} A promise that will return the file as text\n   */\n  readAsText(blob: Blob) {\n    this.reader.readAsText(blob);\n    return this.cancellablePromise;\n  }\n\n  get cancellablePromise() {\n    const { promise, resolve, reject } = RSVP.defer(\n      `ember-file-upload: ${this.label}`\n    );\n\n    const cancellable = promise.then(\n      () => {\n        return this.reader.result;\n      },\n      () => {\n        return RSVP.reject(this.reader.error);\n      },\n      `ember-file-upload: Unpack ${this.label}`\n    );\n\n    let abort: RSVP.Deferred<string> | undefined;\n\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    cancellable.cancel = () => {\n      if (abort == null) {\n        abort = RSVP.defer(`ember-file-upload: Abort ${this.label}`);\n        this.reader.abort();\n      }\n      return abort.promise;\n    };\n\n    this.reader.onload = resolve;\n    this.reader.onerror = reject;\n    this.reader.onabort = () => {\n      abort?.resolve();\n    };\n\n    return cancellable;\n  }\n}\n"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_toPrimitive","input","hint","prim","toPrimitive","undefined","res","call","TypeError","String","Number","_toPropertyKey","arg","key","_defineProperty","value","toPropertyKey","Object","defineProperty","enumerable","configurable","writable","parseHeaders","headerString","split","filter","str","reduce","headers","parts","length","append","slice","trim","Headers","parseResponse","request","body","response","status","Response","statusText","getAllResponseHeaders","error","HTTPRequest","options","resolve","reject","promise","RSVP","defer","label","XMLHttpRequest","withCredentials","aborted","cancel","abort","then","args","newPromise","Promise","apply","onabort","bind","onloadstart","onprogress","onloadend","evt","upload","onload","Math","floor","onerror","get","timeout","set","ontimeout","send","open","method","url","_async","usename","password","setRequestHeader","name","UploadFileReader","reader","FileReader","readAsArrayBuffer","blob","cancellablePromise","readAsDataURL","readAsBinaryString","readAsText","cancellable","result"],"mappings":"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"}